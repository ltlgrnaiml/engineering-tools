{
  "schema_type": "spec",
  "id": "SPEC-SOV-0024_ANOVA-Computation",
  "title": "SOV ANOVA Computation Specification",
  "version": "0.1.0",
  "status": "draft",
  "date": "2025-12-27",
  "author": "Mycahya Eggleston",
  "implements_adr": [
    "ADR-0022_SOV-Analysis-Pipeline"
  ],
  "tier_0_contracts": [
    {
      "module": "shared.contracts.sov.anova",
      "classes": ["ANOVAConfig", "ANOVAResult", "FactorEffect", "VarianceComponent", "PostHocResult"]
    }
  ],
  "purpose": "Define how ANOVA computations are configured and executed. This spec covers the analysis pipeline from data loading through statistical computation to result generation.",
  "scope": "subsystem:SOV",
  "requirements": [
    {
      "id": "REQ-ANOVA-001",
      "description": "ANOVA MUST support multiple factor types",
      "types": ["fixed", "random", "nested", "crossed"]
    },
    {
      "id": "REQ-ANOVA-002",
      "description": "Results MUST include variance components",
      "output": "VarianceComponent for each factor"
    },
    {
      "id": "REQ-ANOVA-003",
      "description": "Post-hoc tests MUST be configurable",
      "tests": ["Tukey", "Bonferroni", "Scheffe", "Dunnett"]
    },
    {
      "id": "REQ-ANOVA-004",
      "description": "Results MUST include effect sizes",
      "metrics": ["eta_squared", "omega_squared", "partial_eta_squared"]
    }
  ],
  "analysis_pipeline": [
    {"stage": 1, "name": "Data Validation", "description": "Validate input data structure"},
    {"stage": 2, "name": "Model Specification", "description": "Build ANOVA model from config"},
    {"stage": 3, "name": "Computation", "description": "Execute ANOVA calculations"},
    {"stage": 4, "name": "Post-Hoc", "description": "Run post-hoc tests if configured"},
    {"stage": 5, "name": "Result Assembly", "description": "Package results into ANOVAResult"}
  ],
  "references": [
    "ADR-0022_SOV-Analysis-Pipeline: Analysis pipeline",
    "shared/contracts/sov/anova.py: Tier-0 contracts"
  ]
}
