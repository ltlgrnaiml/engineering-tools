{
  "schema_type": "adr",
  "id": "ADR-0008_Audit-Trail-Timestamps",
  "title": "Audit Trail Timestamps for All Artifacts and Manifests",
  "status": "proposed",
  "date": "2025-11-22",
  "deciders": "CDU-DAT Core Engineering Team",
  "scope": "cross-cutting",
  "provenance": [
    {
      "at": "2025-11-22",
      "by": "Mycahya Eggleston",
      "note": "Initial draft"
    }
  ],
  "context": "To ensure full auditability, reproducibility, and compliance with deterministic workflows, every artifact and manifest generated by the CDU-DAT pipeline must include standardized timestamps. This enables traceability for all lifecycle events (creation, locking, unlocking, cancellation, etc.), supports CI contract enforcement, and aligns with best practices for provenance and regulatory requirements.",
  "decision_primary": "All artifacts and manifests MUST include ISO-8601 UTC timestamps (no microseconds) for all relevant lifecycle events: created, locked, unlocked, cancelled, etc. CI contract tests MUST enforce presence and correct format of these fields. Timestamps are required for all pipeline stages and persisted outputs.",
  "decision_details": {
    "approach": "Standardize on ISO-8601 UTC timestamps (e.g., 2025-11-22T16:00:00Z, no microseconds). Each artifact/manifest includes fields: created_at, locked_at, unlocked_at, cancelled_at, etc., as applicable. CI contract tests validate presence and format. All timestamps are set by the orchestrator, not by individual stages.",
    "implementation_specs": [
      "SPEC-0012_Audit-Trail-Enforcement-Spec"
    ],
    "constraints": [
      "Timestamps must not include microseconds.",
      "All times must be in UTC.",
      "Timestamps must be present for all relevant lifecycle events.",
      "Setting timestamps must not break determinism or reproducibility."
    ]
  },
  "consequences": [
    "Artifacts and manifests are fully auditable and support deterministic workflows.",
    "CI can enforce contract compliance for all outputs.",
    "Slight increase in schema complexity and test coverage requirements.",
    "Legacy artifacts may require migration to new schema."
  ],
  "alternatives_considered": [
    {
      "name": "No Timestamps",
      "pros": "Simpler schema, less data to manage.",
      "cons": "No audit trail, fails compliance and provenance requirements.",
      "rejected_reason": "Fails core auditability and reproducibility goals."
    },
    {
      "name": "Local Time or Non-Standard Formats",
      "pros": "Easier for local debugging.",
      "cons": "Breaks determinism, complicates cross-system analysis.",
      "rejected_reason": "Non-deterministic and error-prone."
    }
  ],
  "tradeoffs": "Adds minor complexity to schemas and CI, but provides essential auditability and compliance. Determinism is preserved by standardizing on UTC and format.",
  "rollout_plan": [
    "Update schemas and code to add timestamp fields.",
    "Add/extend CI contract tests.",
    "Migrate legacy artifacts as needed.",
    "Communicate changes to all developers and users."
  ],
  "rollback_plan": "Revert schema and code changes; remove timestamp fields and CI checks.",
  "metrics_to_watch": [
    "Percentage of artifacts/manifests with valid timestamps.",
    "CI contract test pass rate for timestamp fields."
  ],
  "guardrails": [
    {
      "rule": "All artifacts and manifests MUST include ISO-8601 UTC timestamps for lifecycle events.",
      "enforcement": "CI contract tests fail if any required timestamp is missing or incorrectly formatted.",
      "scope": "core"
    }
  ],
  "cross_cutting_guardrails": [
    "Deterministic Artifacts: All outputs must be reproducible given the same inputs (see .adrs/cross-cutting/GUARDRAILS.md#deterministic-artifacts)"
  ],
  "references": [
    ".adrs/cross-cutting/ADR-0008_Audit-Trail-Timestamps.json",
    ".adrs/cross-cutting/GUARDRAILS.md"
  ],
  "tags": [
    "audit-trail",
    "timestamps",
    "provenance",
    "determinism"
  ],
  "affected_components": [
    "artifact schemas",
    "manifest generation",
    "CI contract tests",
    "developer docs"
  ],
  "review_date": "2026-05-22"
}
