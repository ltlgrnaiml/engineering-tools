{
  "id": "ADR-0044_frontend-iframe-integration-pattern",
  "title": "Frontend Iframe Integration Pattern",
  "status": "accepted",
  "category": "core",
  "created": "2025-01-15",
  "updated": "2025-12-29",
  "context": "The Engineering Tools Platform has a Homepage frontend that provides unified navigation to multiple tool frontends (DAT, SOV, PPTX). A decision was needed on how to integrate these tool UIs into the Homepage: (1) Unified SPA - all tool code lives in Homepage, or (2) Iframe Integration - Homepage embeds standalone tool frontends via iframes. Without a clear documented pattern, developers may make incorrect assumptions about frontend dependencies, leading to broken tool access when not all services are running.",
  "decision": "Adopt the Iframe Integration Pattern for embedding tool frontends in the Homepage. Each tool maintains its own standalone React frontend that can be developed and tested independently. The Homepage embeds these via iframes when users navigate to /tools/{tool}. This requires ALL tool frontends to be running for full Homepage functionality.",
  "consequences": {
    "positive": [
      "Tool Independence: Each tool frontend can be developed, tested, and deployed independently",
      "Clear Boundaries: No state bleeding between tools, each has isolated React context",
      "Technology Freedom: Tools could theoretically use different frameworks if needed",
      "Deployment Flexibility: Individual tools can be updated without touching Homepage",
      "Parallel Development: Multiple developers can work on different tools without conflicts"
    ],
    "negative": [
      "Resource Usage: All tool frontends must run simultaneously in development (5 Vite servers)",
      "Startup Time: More services to start means longer dev environment initialization",
      "Communication Complexity: Cross-iframe communication requires postMessage if needed",
      "URL Handling: Deep linking within iframed tools requires special handling"
    ],
    "mitigations": [
      "Start script defaults to starting all required services automatically",
      "Documentation clearly states that all frontends are required",
      "Isolated dev mode (--tool flag) available for single-tool development"
    ]
  },
  "implementation": {
    "port_assignments": {
      "homepage": 3000,
      "dat_frontend": 5173,
      "sov_frontend": 5174,
      "pptx_frontend": 5175,
      "backend_gateway": 8000,
      "mkdocs": 8001
    },
    "homepage_routes": {
      "/": "Native - HomePage component",
      "/datasets": "Native - DatasetsPage component",
      "/pipelines": "Native - PipelinesPage component",
      "/devtools": "Native - DevToolsPage component",
      "/tools/dat": "Iframe - embeds localhost:5173",
      "/tools/sov": "Iframe - embeds localhost:5174",
      "/tools/pptx": "Iframe - embeds localhost:5175"
    },
    "start_script_behavior": {
      "default": "Starts all services (backend, all frontends, mkdocs)",
      "isolated_mode": "--tool {name} starts only specified tool frontend + backend"
    }
  },
  "alternatives_considered": [
    {
      "name": "Unified SPA",
      "description": "All tool UI code lives within Homepage as React components",
      "rejected_because": "Would create tight coupling, larger bundle size, and prevent independent tool development"
    },
    {
      "name": "Module Federation",
      "description": "Use Webpack Module Federation to dynamically load tool UIs",
      "rejected_because": "Added complexity, Vite support is experimental, overkill for current scale"
    }
  ],
  "related_adrs": [
    "ADR-0045",
    "ADR-0045"
  ],
  "verification": {
    "commands": [
      "curl http://localhost:3000/tools/dat - should render DAT UI in iframe",
      "curl http://localhost:5173 - standalone DAT frontend should respond",
      "./start.ps1 - should start all 5 frontend services"
    ]
  },
  "decision_details": {
    "implementation_specs": [
      "SPEC-0023"
    ]
  }
}